(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fcf680f"],{3690:function(e,t,l){"use strict";var c=l("be92");t["a"]=Object(c["b"])("statusStore",{state:()=>({isLoading:!1,messages:[]}),actions:{pushMessage(e){const{style:t="success",title:l,content:c}=e;this.messages.push({style:t,title:l,content:c})}}})},e88e:function(e,t,l){"use strict";l.r(t);var c=l("7a23");const a=Object(c["createElementVNode"])("h1",null,"方案管理",-1),o={class:"text-end"},n={class:"table"},r=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{width:"120"},"序號"),Object(c["createElementVNode"])("th",{width:"120"},"分類"),Object(c["createElementVNode"])("th",null,"畫作名稱"),Object(c["createElementVNode"])("th",null,"畫作"),Object(c["createElementVNode"])("th",{width:"120"},"年份"),Object(c["createElementVNode"])("th",{width:"120"},"單位"),Object(c["createElementVNode"])("th",{width:"120"},"尺寸"),Object(c["createElementVNode"])("th",{width:"120"},"售價"),Object(c["createElementVNode"])("th",{width:"100"},"是否啟用"),Object(c["createElementVNode"])("th",{width:"200"},"編輯")])],-1),s=["src","alt"],i={class:"text-right"},d={class:"text-right"},m={key:0,class:"text-success"},p={key:1},b={class:"btn-group"},j=["onClick"],u=["onClick"],h={class:"d-flex justify-content-center"};function O(e,t,l,O,g,V){const E=Object(c["resolveComponent"])("Loading"),N=Object(c["resolveComponent"])("Pagination"),v=Object(c["resolveComponent"])("ProjectModal"),f=Object(c["resolveComponent"])("DeleteModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(E,{active:g.isLoading,"z-index":1060},null,8,["active"]),a,Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary text-white",onClick:t[0]||(t[0]=e=>V.openPaintingModal(!0))}," 建立方案 ")]),Object(c["createElementVNode"])("table",n,[r,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(g.projects,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t+1),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.category),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("img",{src:e.imageUrl,style:{height:"100px"},alt:e.title},null,8,s)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.year),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.unit),1),Object(c["createElementVNode"])("td",i,Object(c["toDisplayString"])(e.size),1),Object(c["createElementVNode"])("td",d,Object(c["toDisplayString"])(e.price),1),Object(c["createElementVNode"])("td",null,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",m,"啟用")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,"未啟用"))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>V.openPaintingModal(!1,e)}," 編輯 ",8,j),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>V.openDeleteModal(e)}," 刪除 ",8,u)])])]))),128))])]),Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(N,{pages:g.pagination,onEmitPage:V.getProjects},null,8,["pages","onEmitPage"])]),Object(c["createVNode"])(v,{ref:"projectModal",project:g.tempPainting,isNew:g.isNew,onUpdateProject:V.updatePainting},null,8,["project","isNew","onUpdateProject"]),Object(c["createVNode"])(f,{ref:"deleteModal",item:g.tempPainting,onDeleteItem:V.deletePainting},null,8,["item","onDeleteItem"])],64)}const g={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},V={class:"modal-dialog modal-xl",role:"document"},E={class:"modal-content border-0"},N={class:"modal-header bg-dark text-white"},v={class:"modal-title",id:"exampleModalLabel"},f={key:0},y={key:1},P=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),k={class:"modal-body"},x={class:"row"},w={class:"col-sm-4"},M={class:"mb-3"},U=Object(c["createElementVNode"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),B={class:"mb-3"},D={for:"uploadImage",class:"form-label"},L=Object(c["createTextVNode"])("或 上傳圖片 "),C={key:0,class:"spinner-border spinner-border-sm",role:"status"},$=Object(c["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),S=[$],T=["src","alt"],I=Object(c["createElementVNode"])("h3",null,"多圖設置",-1),_={key:0},z=["onUpdate:modelValue"],F=["src"],A={class:"col-sm-8"},J={class:"mb-3"},q=Object(c["createElementVNode"])("label",{for:"title",class:"form-label"},"標題",-1),G={class:"row gx-2"},H={class:"mb-3 col-md-6"},K=Object(c["createElementVNode"])("label",{for:"category",class:"form-label"},"分類",-1),Q={class:"mb-3 col-md-6"},R=Object(c["createElementVNode"])("label",{for:"unit",class:"form-label"},"單位",-1),W={class:"row gx-2"},X={class:"mb-3 col-md-6"},Y=Object(c["createElementVNode"])("label",{for:"year",class:"form-label"},"畫作年份",-1),Z={class:"mb-3 col-md-6"},ee=Object(c["createElementVNode"])("label",{for:"size",class:"form-label"},"尺寸",-1),te={class:"row gx-2"},le={class:"mb-3 col-md-6"},ce=Object(c["createElementVNode"])("label",{for:"origin_price",class:"form-label"},"原價",-1),ae={class:"mb-3 col-md-6"},oe=Object(c["createElementVNode"])("label",{for:"price",class:"form-label"},"售價",-1),ne=Object(c["createElementVNode"])("hr",null,null,-1),re={class:"mb-3"},se=Object(c["createElementVNode"])("label",{for:"description",class:"form-label"},"創作理念",-1),ie={class:"mb-3"},de={class:"form-check"},me=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),pe={class:"modal-footer"},be=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function je(e,t,l,a,o,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",N,[Object(c["createElementVNode"])("h5",v,[l.isNew?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",f,"新增畫作")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",y,"編輯畫作"))]),P]),Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("div",M,[U,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[0]||(t[0]=e=>o.tempProject.imageUrl=e),placeholder:"請輸入圖片連結"},null,512),[[c["vModelText"],o.tempProject.imageUrl]])]),Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("label",D,[L,o.state.fileLoading?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",C,S)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("input",{type:"file",id:"uploadImage",class:"form-control",ref:"uploadImage",onChange:t[1]||(t[1]=(...e)=>n.uploadImage&&n.uploadImage(...e))},null,544),Object(c["createElementVNode"])("img",{class:"img-fluid",src:o.tempProject.imageUrl,alt:o.tempProject.title},null,8,T)]),I,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(o.tempProject.imagesUrl)+" ",1),Array.isArray(o.tempProject.imagesUrl)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.tempProject.imagesUrl,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t},[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"imagesUrl",placeholder:"請輸入圖片連結","onUpdate:modelValue":e=>o.tempProject.imagesUrl[t]=e},null,8,z),[[c["vModelText"],o.tempProject.imagesUrl[t]]]),Object(c["createElementVNode"])("img",{class:"img-fluid",src:o.tempProject.imagesUrl[t],alt:""},null,8,F)],64))),128)),!o.tempProject.imagesUrl.length||o.tempProject.imagesUrl[o.tempProject.imagesUrl.length-1]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[2]||(t[2]=e=>o.tempProject.imagesUrl.push(""))}," 新增圖片 ")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:1,class:"btn btn-outline-danger btn-sm d-block w-100",onClick:t[3]||(t[3]=e=>o.tempProject.imagesUrl.pop())}," 刪除圖片 "))])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",A,[Object(c["createElementVNode"])("div",J,[q,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":t[4]||(t[4]=e=>o.tempProject.title=e)},null,512),[[c["vModelText"],o.tempProject.title]])]),Object(c["createElementVNode"])("div",G,[Object(c["createElementVNode"])("div",H,[K,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":t[5]||(t[5]=e=>o.tempProject.category=e)},null,512),[[c["vModelText"],o.tempProject.category]])]),Object(c["createElementVNode"])("div",Q,[R,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":t[6]||(t[6]=e=>o.tempProject.unit=e)},null,512),[[c["vModelText"],o.tempProject.unit]])])]),Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("div",X,[Y,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"year",placeholder:"請輸入畫作年份","onUpdate:modelValue":t[7]||(t[7]=e=>o.tempProject.year=e)},null,512),[[c["vModelText"],o.tempProject.year]])]),Object(c["createElementVNode"])("div",Z,[ee,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"size",placeholder:"請輸入尺寸","onUpdate:modelValue":t[8]||(t[8]=e=>o.tempProject.size=e)},null,512),[[c["vModelText"],o.tempProject.size]])])]),Object(c["createElementVNode"])("div",te,[Object(c["createElementVNode"])("div",le,[ce,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"origin_price",min:"0",placeholder:"請輸入原價","onUpdate:modelValue":t[9]||(t[9]=e=>o.tempProject.origin_price=e)},null,512),[[c["vModelText"],o.tempProject.origin_price]])]),Object(c["createElementVNode"])("div",ae,[oe,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"price",min:"0",placeholder:"請輸入售價","onUpdate:modelValue":t[10]||(t[10]=e=>o.tempProject.price=e)},null,512),[[c["vModelText"],o.tempProject.price]])])]),ne,Object(c["createElementVNode"])("div",re,[se,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":t[11]||(t[11]=e=>o.tempProject.description=e)},null,512),[[c["vModelText"],o.tempProject.description]])]),Object(c["createElementVNode"])("div",ie,[Object(c["createElementVNode"])("div",de,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>o.tempProject.is_enabled=e),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[c["vModelCheckbox"],o.tempProject.is_enabled]]),me])])])])]),Object(c["createElementVNode"])("div",pe,[be,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=t=>e.$emit("update-project",o.tempProject))}," 確認 ")])])])],512)}var ue=l("e0ae"),he=l("3690");const Oe=Object(he["a"])();var ge={data(){return{tempProject:{imagesUrl:[]},state:{}}},props:{project:{type:Object,default(){return{}}},isNew:{type:Boolean,default:!1}},mixins:[ue["a"]],watch:{project(){this.tempProject=this.project,this.tempProject.imagesUrl||(this.tempProject.imagesUrl=[]),this.tempProject.imageUrl||(this.tempProject.imageUrl="")}},methods:{uploadImage(){this.state.fileLoading=!0;const e=this.$refs.uploadImage.files[0],t=new FormData;t.append("file-to-upload",e),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/upload",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.state.fileLoading=!1,e.data.success?(this.tempProject.imageUrl=e.data.imageUrl,this.$refs.uploadImage.value="",Oe.pushMessage({style:"success",title:"圖片上傳結果",content:e.data.message})):(this.$refs.uploadImage.value="",Oe.pushMessage({style:"danger",title:"圖片上傳失敗",content:e.data.message}))}).catch(e=>{this.state.fileLoading=!1,this.$httpMessageState(e.response,"圖片上傳")})}}},Ve=l("6b0d"),Ee=l.n(Ve);const Ne=Ee()(ge,[["render",je]]);var ve=Ne,fe=l("5f48"),ye=l("1799"),Pe={data(){return{isLoading:!1,projects:[],pagination:{},tempPainting:{},isNew:!1}},components:{ProjectModal:ve,DeleteModal:fe["a"],Pagination:ye["a"]},methods:{getProjects(e=1){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/products?page="+e).then(e=>{this.projects=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response,"錯誤訊息")})},openPaintingModal(e,t){this.isNew=e,this.tempPainting=e?{}:{...t},this.$refs.projectModal.openModal()},updatePainting(e){this.isLoading=!0,this.tempPainting=e;let t="https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/product/",l="post",c="新增畫作";this.isNew||(t="https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/product/"+e.id,l="put",c="更新畫作"),this.$http[l](t,{data:this.tempPainting}).then(e=>{this.getProjects(this.pagination.current_page),this.$refs.projectModal.closeModal(),this.isLoading=!1,this.$httpMessageState(e,c)}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response)})},openDeleteModal(e){this.tempPainting={...e},this.$refs.deleteModal.openModal()},deletePainting(e){this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/product/"+e).then(e=>{this.getProjects(this.pagination.current_page),this.isLoading=!1,this.$httpMessageState(e,"刪除畫作"),this.$refs.deleteModal.closeModal()}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response,"刪除畫作")})}},mounted(){this.getProjects()}};const ke=Ee()(Pe,[["render",O]]);t["default"]=ke}}]);
//# sourceMappingURL=chunk-2fcf680f.9b2d31f0.js.map