(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21636b"],{c206:function(e,t,l){"use strict";l.r(t);var c=l("7a23");const o=Object(c["createElementVNode"])("h1",null,"收藏者資料管理",-1),n={class:"table"},a=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"序號"),Object(c["createElementVNode"])("th",null,"購買時間"),Object(c["createElementVNode"])("th",null,"Email"),Object(c["createElementVNode"])("th",null,"購買款項"),Object(c["createElementVNode"])("th",null,"應付金額"),Object(c["createElementVNode"])("th",null,"是否付款"),Object(c["createElementVNode"])("th",null,"編輯")])],-1),i={key:0},d={class:"list-unstyled"},r={class:"text-right"},s={class:"form-check form-switch"},b=["id","onUpdate:modelValue","onChange"],m=["for"],p={key:0},j={key:1},O={class:"btn-group"},u=["onClick"],E=["onClick"],h={class:"d-flex justify-content-center"};function V(e,t,l,V,N,g){const k=Object(c["resolveComponent"])("Loading"),y=Object(c["resolveComponent"])("Pagination"),C=Object(c["resolveComponent"])("CollectionModal"),B=Object(c["resolveComponent"])("DeleteModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(k,{active:N.isLoading,"z-index":1060},null,8,["active"]),o,Object(c["createElementVNode"])("table",n,[a,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(N.collections,(t,l)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:l},[N.collections.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:0,class:Object(c["normalizeClass"])({"text-secondary":!t.is_paid})},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(l+1),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(c["createElementVNode"])("td",null,[t.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",i,Object(c["toDisplayString"])(t.user.email),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",d,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.products,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:e.id},Object(c["toDisplayString"])(e.product.title)+" 數量："+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1))),128))])]),Object(c["createElementVNode"])("td",r,Object(c["toDisplayString"])(t.total),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",s,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:""+t.id,"onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>g.updatePayment(t)},null,40,b),[[c["vModelCheckbox"],t.is_paid]]),Object(c["createElementVNode"])("label",{class:"form-check-label",for:""+t.id},[""+t.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,"未付款"))],8,m)])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",O,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>g.openCollectionModal(t)}," 檢視 ",8,u),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>g.openDeleteModal(t)}," 刪除 ",8,E)])])],2)):Object(c["createCommentVNode"])("",!0)],64))),128))])]),Object(c["createElementVNode"])("div",h,[Object(c["createVNode"])(y,{pages:N.pagination,onEmitPage:g.getCollections},null,8,["pages","onEmitPage"])]),Object(c["createVNode"])(C,{ref:"collectionModal",collection:N.tempCollection,onUpdatePayment:g.updatePayment},null,8,["collection","onUpdatePayment"]),Object(c["createVNode"])(B,{ref:"deleteModal",item:N.tempCollection,onDeleteItem:g.deleteCollection},null,8,["item","onDeleteItem"])],64)}var N=l("1799");const g={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},k={class:"modal-dialog modal-xl",role:"document"},y={class:"modal-content border-0"},C=Object(c["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createElementVNode"])("span",null,"收藏資訊")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body"},f={class:"row"},v={class:"col-md-4"},M=Object(c["createElementVNode"])("h3",null,"收藏者",-1),D={class:"table"},S={key:0},x=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),$=Object(c["createElementVNode"])("th",null,"Email",-1),L=Object(c["createElementVNode"])("th",null,"電話",-1),_=Object(c["createElementVNode"])("th",null,"地址",-1),w={class:"col-md-8"},P=Object(c["createElementVNode"])("h3",null,"訂單細節",-1),F={class:"table"},U=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),q=Object(c["createElementVNode"])("th",null,"收藏時間",-1),z=Object(c["createElementVNode"])("th",null,"付款時間",-1),I={key:0},J={key:1},A=Object(c["createElementVNode"])("th",null,"付款狀態",-1),G={key:0,class:"text-success"},H={key:1,class:"text-muted"},K=Object(c["createElementVNode"])("th",null,"總金額",-1),Q=Object(c["createElementVNode"])("h3",null,"選購商品",-1),R={class:"table"},T=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr")],-1),W={class:"text-end"},X={class:"d-flex justify-content-end"},Y={class:"form-check"},Z={class:"form-check-label",for:"collectionPayment"},ee={key:0},te={key:1},le={class:"modal-footer"},ce=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function oe(e,t,l,o,n,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("div",y,[C,Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",v,[M,Object(c["createElementVNode"])("table",D,[n.tempCollection.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tbody",S,[Object(c["createElementVNode"])("tr",null,[x,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempCollection.user.name),1)]),Object(c["createElementVNode"])("tr",null,[$,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempCollection.user.email),1)]),Object(c["createElementVNode"])("tr",null,[L,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempCollection.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[_,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempCollection.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",w,[P,Object(c["createElementVNode"])("table",F,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[U,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempCollection.id),1)]),Object(c["createElementVNode"])("tr",null,[q,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(n.tempCollection.create_at)),1)]),Object(c["createElementVNode"])("tr",null,[z,Object(c["createElementVNode"])("td",null,[n.tempCollection.paid_date?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",I,Object(c["toDisplayString"])(e.$filters.date(n.tempCollection.paid_date)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",J,"時間不正確"))])]),Object(c["createElementVNode"])("tr",null,[A,Object(c["createElementVNode"])("td",null,[n.tempCollection.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("strong",G,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",H,"尚未付款"))])]),Object(c["createElementVNode"])("tr",null,[K,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(n.tempCollection.total)),1)])])]),Q,Object(c["createElementVNode"])("table",R,[T,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.tempCollection.products,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(t.product.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.qty)+" / "+Object(c["toDisplayString"])(t.product.unit),1),Object(c["createElementVNode"])("td",W,Object(c["toDisplayString"])(e.$filters.currency(t.final_total)),1)]))),128))])]),Object(c["createElementVNode"])("div",X,[Object(c["createElementVNode"])("div",Y,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.tempCollection.is_paid=e),id:"collectionPayment"},null,512),[[c["vModelCheckbox"],n.tempCollection.is_paid]]),Object(c["createElementVNode"])("label",Z,[n.tempCollection.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",ee,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",te,"未付款"))])])])])])]),Object(c["createElementVNode"])("div",le,[ce,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=t=>e.$emit("update-payment",n.tempCollection))}," 修改付款狀態 ")])])])],512)}var ne=l("e0ae"),ae={data(){return{tempCollection:{}}},props:{collection:{type:Object,default(){return{}}}},mixins:[ne["a"]],watch:{collection(){this.tempCollection=this.collection}}},ie=l("6b0d"),de=l.n(ie);const re=de()(ae,[["render",oe]]);var se=re,be=l("5f48"),me={data(){return{isLoading:!1,collections:[],pagination:{},tempCollection:{}}},components:{Pagination:N["a"],CollectionModal:se,DeleteModal:be["a"]},methods:{getCollections(e=1){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/orders?page="+e).then(e=>{this.collections=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response,"錯誤訊息")})},updatePayment(e){this.isLoading=!0;const t={is_paid:e.is_paid};this.$http.put("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/order/"+e.id,{data:t}).then(e=>{this.getCollections(this.pagination.current_page),this.$refs.collectionModal.closeModal(),this.isLoading=!1,this.$httpMessageState(e)}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response)})},openCollectionModal(e){this.tempCollection={...e},this.$refs.collectionModal.openModal()},openDeleteModal(e){this.tempCollection={...e},this.$refs.deleteModal.openModal()},deleteCollection(e){this.isLoading=!0,this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/clara-layout/admin/order/"+e).then(e=>{this.getCollections(this.pagination.current_page),this.$refs.deleteModal.closeModal(),this.isLoading=!1,this.$httpMessageState(e,"刪除收藏")}).catch(e=>{this.isLoading=!1,this.$httpMessageState(e.response,"刪除收藏")})}},mounted(){this.getCollections()}};const pe=de()(me,[["render",V]]);t["default"]=pe}}]);
//# sourceMappingURL=chunk-2d21636b.9db564b9.js.map